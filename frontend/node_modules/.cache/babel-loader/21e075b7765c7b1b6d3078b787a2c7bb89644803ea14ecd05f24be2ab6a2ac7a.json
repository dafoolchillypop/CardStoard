{"ast":null,"code":"// src/pages/DeleteCard.jsx\nimport React,{useEffect,useState}from\"react\";import{useParams,Link,useNavigate}from\"react-router-dom\";import api from\"../api/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function DeleteCard(){const{id}=useParams();const navigate=useNavigate();const[card,setCard]=useState(null);const[settings,setSettings]=useState(null);useEffect(()=>{api.get(\"/cards/\".concat(id)).then(res=>setCard(res.data)).catch(err=>console.error(\"Error fetching card:\",err));api.get(\"/settings/\").then(res=>setSettings(res.data)).catch(err=>console.error(\"Error fetching settings:\",err));},[id]);if(!card)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading card...\"});// ‚úÖ Rookie check\nconst isRookie=card.rookie===\"*\"||card.rookie===\"1\"||Number(card.rookie)===1||card.rookie===true;// ‚úÖ Grade badge\nconst g=parseFloat(card.grade);let gradeClass=\"grade-unknown\";if(!Number.isNaN(g)){if(g===3)gradeClass=\"grade-mt\";else if(g===1.5)gradeClass=\"grade-ex\";else if(g===1)gradeClass=\"grade-vg\";else if(g===0.8)gradeClass=\"grade-gd\";else if(g===0.4)gradeClass=\"grade-fr\";else gradeClass=\"grade-pr\";}// ‚úÖ Market factor + card value calc\nlet cardValue=null;if(settings){const books=[parseFloat(card.book_high)||0,parseFloat(card.book_high_mid)||0,parseFloat(card.book_mid)||0,parseFloat(card.book_low_mid)||0,parseFloat(card.book_low)||0];const avgBook=books.reduce((a,b)=>a+b,0)/books.length;let factor=null;if(g===3&&isRookie)factor=settings.auto_factor;else if(g===3)factor=settings.mtgrade_factor;else if(isRookie)factor=settings.rookie_factor;else if(g===1.5)factor=settings.exgrade_factor;else if(g===1)factor=settings.vggrade_factor;else if(g===0.8)factor=settings.gdgrade_factor;else if(g===0.4)factor=settings.frgrade_factor;else if(g===0.2)factor=settings.prgrade_factor;if(factor!==null){cardValue=Math.round(avgBook*g*factor);}}let valueClass=\"value-low\";if(cardValue!==null){if(cardValue>=500)valueClass=\"value-high\";else if(cardValue>=200)valueClass=\"value-mid\";else if(cardValue>=50)valueClass=\"value-lowmid\";}const handleDelete=async()=>{if(!window.confirm(\"Are you sure you want to delete this card?\"))return;try{await api.delete(\"/cards/\".concat(id));alert(\"Card deleted successfully!\");navigate(\"/list-cards\");}catch(err){console.error(\"Error deleting card:\",err);alert(\"Failed to delete card.\");}};return/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:\"center\"},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[card.year,\" \",card.brand,\" \",card.first_name,\" \",card.last_name,\" #\",card.card_number,isRookie&&/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:\"0.5rem\",color:\"gold\",fontSize:\"1.5rem\"},children:\"\\u2B50 (RC)\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:\"0.5rem 0\"},children:[card.grade&&/*#__PURE__*/_jsxs(\"span\",{className:\"badge badge-grade \".concat(gradeClass),children:[\"Grade: \",card.grade]}),cardValue!==null&&/*#__PURE__*/_jsxs(\"span\",{className:\"badge badge-value \".concat(valueClass),children:[\"Value: $\",cardValue]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"center\",gap:\"2rem\",marginTop:\"1rem\"},children:[card.front_image&&/*#__PURE__*/_jsx(\"img\",{src:\"http://host.docker.internal:8000\".concat(card.front_image),alt:\"Front\",style:{maxWidth:\"800px\",height:\"auto\"}}),card.back_image&&/*#__PURE__*/_jsx(\"img\",{src:\"http://host.docker.internal:8000\".concat(card.back_image),alt:\"Back\",style:{maxWidth:\"800px\",height:\"auto\"}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"1.5rem\"},children:[/*#__PURE__*/_jsx(Link,{to:\"/list-cards\",className:\"nav-btn\",children:\"\\u2B05 Back to List\"}),/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"nav-btn\",style:{marginLeft:\"1rem\"},children:\"\\uD83C\\uDFE0 Home\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"2rem\"},children:/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,style:{backgroundColor:\"red\",color:\"white\",padding:\"0.75rem 1.5rem\",border:\"none\",borderRadius:\"5px\",cursor:\"pointer\",fontSize:\"1rem\"},children:\"\\u274C Delete This Card\"})})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","useNavigate","api","jsx","_jsx","jsxs","_jsxs","DeleteCard","id","navigate","card","setCard","settings","setSettings","get","concat","then","res","data","catch","err","console","error","children","isRookie","rookie","Number","g","parseFloat","grade","gradeClass","isNaN","cardValue","books","book_high","book_high_mid","book_mid","book_low_mid","book_low","avgBook","reduce","a","b","length","factor","auto_factor","mtgrade_factor","rookie_factor","exgrade_factor","vggrade_factor","gdgrade_factor","frgrade_factor","prgrade_factor","Math","round","valueClass","handleDelete","window","confirm","delete","alert","style","textAlign","year","brand","first_name","last_name","card_number","marginLeft","color","fontSize","margin","className","display","justifyContent","gap","marginTop","front_image","src","alt","maxWidth","height","back_image","to","onClick","backgroundColor","padding","border","borderRadius","cursor"],"sources":["/home/shawn/projects/CardStoard/frontend/src/pages/DeleteCard.jsx"],"sourcesContent":["// src/pages/DeleteCard.jsx\nimport React, { useEffect, useState } from \"react\";\nimport { useParams, Link, useNavigate } from \"react-router-dom\";\nimport api from \"../api/api\";\n\nexport default function DeleteCard() {\n  const { id } = useParams();\n  const navigate = useNavigate();\n\n  const [card, setCard] = useState(null);\n  const [settings, setSettings] = useState(null);\n\n  useEffect(() => {\n    api.get(`/cards/${id}`)\n      .then((res) => setCard(res.data))\n      .catch((err) => console.error(\"Error fetching card:\", err));\n\n    api.get(\"/settings/\")\n      .then((res) => setSettings(res.data))\n      .catch((err) => console.error(\"Error fetching settings:\", err));\n  }, [id]);\n\n  if (!card) return <p>Loading card...</p>;\n\n  // ‚úÖ Rookie check\n  const isRookie =\n    card.rookie === \"*\" || card.rookie === \"1\" || Number(card.rookie) === 1 || card.rookie === true;\n\n  // ‚úÖ Grade badge\n  const g = parseFloat(card.grade);\n  let gradeClass = \"grade-unknown\";\n  if (!Number.isNaN(g)) {\n    if (g === 3) gradeClass = \"grade-mt\";\n    else if (g === 1.5) gradeClass = \"grade-ex\";\n    else if (g === 1) gradeClass = \"grade-vg\";\n    else if (g === 0.8) gradeClass = \"grade-gd\";\n    else if (g === 0.4) gradeClass = \"grade-fr\";\n    else gradeClass = \"grade-pr\";\n  }\n\n  // ‚úÖ Market factor + card value calc\n  let cardValue = null;\n  if (settings) {\n    const books = [\n      parseFloat(card.book_high) || 0,\n      parseFloat(card.book_high_mid) || 0,\n      parseFloat(card.book_mid) || 0,\n      parseFloat(card.book_low_mid) || 0,\n      parseFloat(card.book_low) || 0,\n    ];\n    const avgBook = books.reduce((a, b) => a + b, 0) / books.length;\n    let factor = null;\n\n    if (g === 3 && isRookie) factor = settings.auto_factor;\n    else if (g === 3) factor = settings.mtgrade_factor;\n    else if (isRookie) factor = settings.rookie_factor;\n    else if (g === 1.5) factor = settings.exgrade_factor;\n    else if (g === 1) factor = settings.vggrade_factor;\n    else if (g === 0.8) factor = settings.gdgrade_factor;\n    else if (g === 0.4) factor = settings.frgrade_factor;\n    else if (g === 0.2) factor = settings.prgrade_factor;\n\n    if (factor !== null) {\n      cardValue = Math.round(avgBook * g * factor);\n    }\n  }\n\n  let valueClass = \"value-low\";\n  if (cardValue !== null) {\n    if (cardValue >= 500) valueClass = \"value-high\";\n    else if (cardValue >= 200) valueClass = \"value-mid\";\n    else if (cardValue >= 50) valueClass = \"value-lowmid\";\n  }\n\n  const handleDelete = async () => {\n    if (!window.confirm(\"Are you sure you want to delete this card?\")) return;\n    try {\n      await api.delete(`/cards/${id}`);\n      alert(\"Card deleted successfully!\");\n      navigate(\"/list-cards\");\n    } catch (err) {\n      console.error(\"Error deleting card:\", err);\n      alert(\"Failed to delete card.\");\n    }\n  };\n\n  return (\n    <div style={{ textAlign: \"center\" }}>\n      {/* Heading with Rookie Star */}\n      <h2>\n        {card.year} {card.brand} {card.first_name} {card.last_name} #{card.card_number}\n        {isRookie && (\n          <span style={{ marginLeft: \"0.5rem\", color: \"gold\", fontSize: \"1.5rem\" }}>‚≠ê (RC)</span>\n        )}\n      </h2>\n\n      {/* Grade + Value badges */}\n      <div style={{ margin: \"0.5rem 0\" }}>\n        {card.grade && (\n          <span className={`badge badge-grade ${gradeClass}`}>\n            Grade: {card.grade}\n          </span>\n        )}\n        {cardValue !== null && (\n          <span className={`badge badge-value ${valueClass}`}>\n            Value: ${cardValue}\n          </span>\n        )}\n      </div>\n\n      {/* Images */}\n      <div style={{ display: \"flex\", justifyContent: \"center\", gap: \"2rem\", marginTop: \"1rem\" }}>\n        {card.front_image && (\n          <img\n            src={`http://host.docker.internal:8000${card.front_image}`}\n            alt=\"Front\"\n            style={{ maxWidth: \"800px\", height: \"auto\" }}\n          />\n        )}\n        {card.back_image && (\n          <img\n            src={`http://host.docker.internal:8000${card.back_image}`}\n            alt=\"Back\"\n            style={{ maxWidth: \"800px\", height: \"auto\" }}\n          />\n        )}\n      </div>\n\n      {/* Navigation + Delete button */}\n      <div style={{ marginTop: \"1.5rem\" }}>\n        <Link to=\"/list-cards\" className=\"nav-btn\">‚¨Ö Back to List</Link>\n        <Link to=\"/\" className=\"nav-btn\" style={{ marginLeft: \"1rem\" }}>üè† Home</Link>\n      </div>\n\n      <div style={{ marginTop: \"2rem\" }}>\n        <button\n          onClick={handleDelete}\n          style={{\n            backgroundColor: \"red\",\n            color: \"white\",\n            padding: \"0.75rem 1.5rem\",\n            border: \"none\",\n            borderRadius: \"5px\",\n            cursor: \"pointer\",\n            fontSize: \"1rem\"\n          }}\n        >\n          ‚ùå Delete This Card\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CAC/D,MAAO,CAAAC,GAAG,KAAM,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE7B,cAAe,SAAS,CAAAC,UAAUA,CAAA,CAAG,CACnC,KAAM,CAAEC,EAAG,CAAC,CAAGT,SAAS,CAAC,CAAC,CAC1B,KAAM,CAAAU,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACS,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACc,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAE9CD,SAAS,CAAC,IAAM,CACdK,GAAG,CAACY,GAAG,WAAAC,MAAA,CAAWP,EAAE,CAAE,CAAC,CACpBQ,IAAI,CAAEC,GAAG,EAAKN,OAAO,CAACM,GAAG,CAACC,IAAI,CAAC,CAAC,CAChCC,KAAK,CAAEC,GAAG,EAAKC,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAEF,GAAG,CAAC,CAAC,CAE7DlB,GAAG,CAACY,GAAG,CAAC,YAAY,CAAC,CAClBE,IAAI,CAAEC,GAAG,EAAKJ,WAAW,CAACI,GAAG,CAACC,IAAI,CAAC,CAAC,CACpCC,KAAK,CAAEC,GAAG,EAAKC,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAEF,GAAG,CAAC,CAAC,CACnE,CAAC,CAAE,CAACZ,EAAE,CAAC,CAAC,CAER,GAAI,CAACE,IAAI,CAAE,mBAAON,IAAA,MAAAmB,QAAA,CAAG,iBAAe,CAAG,CAAC,CAExC;AACA,KAAM,CAAAC,QAAQ,CACZd,IAAI,CAACe,MAAM,GAAK,GAAG,EAAIf,IAAI,CAACe,MAAM,GAAK,GAAG,EAAIC,MAAM,CAAChB,IAAI,CAACe,MAAM,CAAC,GAAK,CAAC,EAAIf,IAAI,CAACe,MAAM,GAAK,IAAI,CAEjG;AACA,KAAM,CAAAE,CAAC,CAAGC,UAAU,CAAClB,IAAI,CAACmB,KAAK,CAAC,CAChC,GAAI,CAAAC,UAAU,CAAG,eAAe,CAChC,GAAI,CAACJ,MAAM,CAACK,KAAK,CAACJ,CAAC,CAAC,CAAE,CACpB,GAAIA,CAAC,GAAK,CAAC,CAAEG,UAAU,CAAG,UAAU,CAAC,IAChC,IAAIH,CAAC,GAAK,GAAG,CAAEG,UAAU,CAAG,UAAU,CAAC,IACvC,IAAIH,CAAC,GAAK,CAAC,CAAEG,UAAU,CAAG,UAAU,CAAC,IACrC,IAAIH,CAAC,GAAK,GAAG,CAAEG,UAAU,CAAG,UAAU,CAAC,IACvC,IAAIH,CAAC,GAAK,GAAG,CAAEG,UAAU,CAAG,UAAU,CAAC,IACvC,CAAAA,UAAU,CAAG,UAAU,CAC9B,CAEA;AACA,GAAI,CAAAE,SAAS,CAAG,IAAI,CACpB,GAAIpB,QAAQ,CAAE,CACZ,KAAM,CAAAqB,KAAK,CAAG,CACZL,UAAU,CAAClB,IAAI,CAACwB,SAAS,CAAC,EAAI,CAAC,CAC/BN,UAAU,CAAClB,IAAI,CAACyB,aAAa,CAAC,EAAI,CAAC,CACnCP,UAAU,CAAClB,IAAI,CAAC0B,QAAQ,CAAC,EAAI,CAAC,CAC9BR,UAAU,CAAClB,IAAI,CAAC2B,YAAY,CAAC,EAAI,CAAC,CAClCT,UAAU,CAAClB,IAAI,CAAC4B,QAAQ,CAAC,EAAI,CAAC,CAC/B,CACD,KAAM,CAAAC,OAAO,CAAGN,KAAK,CAACO,MAAM,CAAC,CAACC,CAAC,CAAEC,CAAC,GAAKD,CAAC,CAAGC,CAAC,CAAE,CAAC,CAAC,CAAGT,KAAK,CAACU,MAAM,CAC/D,GAAI,CAAAC,MAAM,CAAG,IAAI,CAEjB,GAAIjB,CAAC,GAAK,CAAC,EAAIH,QAAQ,CAAEoB,MAAM,CAAGhC,QAAQ,CAACiC,WAAW,CAAC,IAClD,IAAIlB,CAAC,GAAK,CAAC,CAAEiB,MAAM,CAAGhC,QAAQ,CAACkC,cAAc,CAAC,IAC9C,IAAItB,QAAQ,CAAEoB,MAAM,CAAGhC,QAAQ,CAACmC,aAAa,CAAC,IAC9C,IAAIpB,CAAC,GAAK,GAAG,CAAEiB,MAAM,CAAGhC,QAAQ,CAACoC,cAAc,CAAC,IAChD,IAAIrB,CAAC,GAAK,CAAC,CAAEiB,MAAM,CAAGhC,QAAQ,CAACqC,cAAc,CAAC,IAC9C,IAAItB,CAAC,GAAK,GAAG,CAAEiB,MAAM,CAAGhC,QAAQ,CAACsC,cAAc,CAAC,IAChD,IAAIvB,CAAC,GAAK,GAAG,CAAEiB,MAAM,CAAGhC,QAAQ,CAACuC,cAAc,CAAC,IAChD,IAAIxB,CAAC,GAAK,GAAG,CAAEiB,MAAM,CAAGhC,QAAQ,CAACwC,cAAc,CAEpD,GAAIR,MAAM,GAAK,IAAI,CAAE,CACnBZ,SAAS,CAAGqB,IAAI,CAACC,KAAK,CAACf,OAAO,CAAGZ,CAAC,CAAGiB,MAAM,CAAC,CAC9C,CACF,CAEA,GAAI,CAAAW,UAAU,CAAG,WAAW,CAC5B,GAAIvB,SAAS,GAAK,IAAI,CAAE,CACtB,GAAIA,SAAS,EAAI,GAAG,CAAEuB,UAAU,CAAG,YAAY,CAAC,IAC3C,IAAIvB,SAAS,EAAI,GAAG,CAAEuB,UAAU,CAAG,WAAW,CAAC,IAC/C,IAAIvB,SAAS,EAAI,EAAE,CAAEuB,UAAU,CAAG,cAAc,CACvD,CAEA,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAACC,MAAM,CAACC,OAAO,CAAC,4CAA4C,CAAC,CAAE,OACnE,GAAI,CACF,KAAM,CAAAxD,GAAG,CAACyD,MAAM,WAAA5C,MAAA,CAAWP,EAAE,CAAE,CAAC,CAChCoD,KAAK,CAAC,4BAA4B,CAAC,CACnCnD,QAAQ,CAAC,aAAa,CAAC,CACzB,CAAE,MAAOW,GAAG,CAAE,CACZC,OAAO,CAACC,KAAK,CAAC,sBAAsB,CAAEF,GAAG,CAAC,CAC1CwC,KAAK,CAAC,wBAAwB,CAAC,CACjC,CACF,CAAC,CAED,mBACEtD,KAAA,QAAKuD,KAAK,CAAE,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAvC,QAAA,eAElCjB,KAAA,OAAAiB,QAAA,EACGb,IAAI,CAACqD,IAAI,CAAC,GAAC,CAACrD,IAAI,CAACsD,KAAK,CAAC,GAAC,CAACtD,IAAI,CAACuD,UAAU,CAAC,GAAC,CAACvD,IAAI,CAACwD,SAAS,CAAC,IAAE,CAACxD,IAAI,CAACyD,WAAW,CAC7E3C,QAAQ,eACPpB,IAAA,SAAMyD,KAAK,CAAE,CAAEO,UAAU,CAAE,QAAQ,CAAEC,KAAK,CAAE,MAAM,CAAEC,QAAQ,CAAE,QAAS,CAAE,CAAA/C,QAAA,CAAC,aAAM,CAAM,CACvF,EACC,CAAC,cAGLjB,KAAA,QAAKuD,KAAK,CAAE,CAAEU,MAAM,CAAE,UAAW,CAAE,CAAAhD,QAAA,EAChCb,IAAI,CAACmB,KAAK,eACTvB,KAAA,SAAMkE,SAAS,sBAAAzD,MAAA,CAAuBe,UAAU,CAAG,CAAAP,QAAA,EAAC,SAC3C,CAACb,IAAI,CAACmB,KAAK,EACd,CACP,CACAG,SAAS,GAAK,IAAI,eACjB1B,KAAA,SAAMkE,SAAS,sBAAAzD,MAAA,CAAuBwC,UAAU,CAAG,CAAAhC,QAAA,EAAC,UAC1C,CAACS,SAAS,EACd,CACP,EACE,CAAC,cAGN1B,KAAA,QAAKuD,KAAK,CAAE,CAAEY,OAAO,CAAE,MAAM,CAAEC,cAAc,CAAE,QAAQ,CAAEC,GAAG,CAAE,MAAM,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAArD,QAAA,EACvFb,IAAI,CAACmE,WAAW,eACfzE,IAAA,QACE0E,GAAG,oCAAA/D,MAAA,CAAqCL,IAAI,CAACmE,WAAW,CAAG,CAC3DE,GAAG,CAAC,OAAO,CACXlB,KAAK,CAAE,CAAEmB,QAAQ,CAAE,OAAO,CAAEC,MAAM,CAAE,MAAO,CAAE,CAC9C,CACF,CACAvE,IAAI,CAACwE,UAAU,eACd9E,IAAA,QACE0E,GAAG,oCAAA/D,MAAA,CAAqCL,IAAI,CAACwE,UAAU,CAAG,CAC1DH,GAAG,CAAC,MAAM,CACVlB,KAAK,CAAE,CAAEmB,QAAQ,CAAE,OAAO,CAAEC,MAAM,CAAE,MAAO,CAAE,CAC9C,CACF,EACE,CAAC,cAGN3E,KAAA,QAAKuD,KAAK,CAAE,CAAEe,SAAS,CAAE,QAAS,CAAE,CAAArD,QAAA,eAClCnB,IAAA,CAACJ,IAAI,EAACmF,EAAE,CAAC,aAAa,CAACX,SAAS,CAAC,SAAS,CAAAjD,QAAA,CAAC,qBAAc,CAAM,CAAC,cAChEnB,IAAA,CAACJ,IAAI,EAACmF,EAAE,CAAC,GAAG,CAACX,SAAS,CAAC,SAAS,CAACX,KAAK,CAAE,CAAEO,UAAU,CAAE,MAAO,CAAE,CAAA7C,QAAA,CAAC,mBAAO,CAAM,CAAC,EAC3E,CAAC,cAENnB,IAAA,QAAKyD,KAAK,CAAE,CAAEe,SAAS,CAAE,MAAO,CAAE,CAAArD,QAAA,cAChCnB,IAAA,WACEgF,OAAO,CAAE5B,YAAa,CACtBK,KAAK,CAAE,CACLwB,eAAe,CAAE,KAAK,CACtBhB,KAAK,CAAE,OAAO,CACdiB,OAAO,CAAE,gBAAgB,CACzBC,MAAM,CAAE,MAAM,CACdC,YAAY,CAAE,KAAK,CACnBC,MAAM,CAAE,SAAS,CACjBnB,QAAQ,CAAE,MACZ,CAAE,CAAA/C,QAAA,CACH,yBAED,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}